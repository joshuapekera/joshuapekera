var tabWidths=[],tabWidthRunningSum=[],navOffsets=[],tabs=[],slides=[],captions=[],downIndex=0,endValue=0,viewportWidth=0,viewportHeight=0,nav,imageWidths=[1080,2400,1080,1080,1080,1080,1080,1080,1080,1080,1080,1080],imageHeights=[1920,1536,1920,1920,1920,1920,1920,1920,1920,1920,1920,1920],rightEdgeInput=[400,812,400,400,400,400,400,400,400,400,400,400,400,400],bottomEdgeInput=[641,545,641,641,641,641,641,641,641,641,641,641,641],bottomPadding=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],springSystem=new rebound.SpringSystem,mainSpring=springSystem.createSpring(),downSpring=springSystem.createSpring(),lastX=0,panVelocity=0,isDragging=!1;$(document).ready(function(a){"use strict";viewportWidth=$("#wrapper").innerWidth(),viewportHeight=$("#slides li").innerHeight();var b=calculateTabWidths();nav=document.getElementById("nav"),layoutCaptions(),$(window).on("resize",function(){layoutCaptions()}),$("#nav").width(b),$("#nav li").each(function(a,b){navOffsets[a]=navOffsetForIndex(a),tabs[a]=b}),setupMainSpring(),setupPanSupport(),setupTabPressedStates(),setupArrowKeys(),$("#slides li").each(function(a,b){b.style.webkitTransform="translate3d("+viewportWidth*a+"px, 0, 0)",b.style.MozTransform="translate3d("+viewportWidth*a+"px, 0, 0)",slides[a]=b}),selectTabIndex(0,!1);var c=[];$("#nav li").each(function(a,b){$(b).click(function(){selectTabIndex(a,!0)}),$(b).mousedown(function(){c[a]=!0,pressDownOnTabIndex(a)}),$(b).mouseup(function(){c[a]=!1,releaseDownOnTabIndex(a)}),$(b).mouseleave(function(){c[a]===!0&&releaseDownOnTabIndex(a)}),$(b).mouseenter(function(){c[a]===!0&&pressDownOnTabIndex(a)})}),$("#wrapper").mouseup(function(){c=[]})}),setupMainSpring=function(){mainSpring.setSpringConfig(rebound.SpringConfig.fromOrigamiTensionAndFriction(4.5,5.7)),mainSpring.addListener({onSpringUpdate:function(a){var b=a.getCurrentValue(),c=transitionForProgressInSteps(b,navOffsets);Math.abs(a.getVelocity())<.05&&window.devicePixelRatio<1.1&&(c=Math.floor(c)),nav.style.webkitTransform="translate3d("+c+"px, 0, 0)",nav.style.MozTransform="translate3d("+c+"px, 0, 0)",$("#slides li").each(function(a,c){var d=1-Math.abs(b-a);if(d>0){var e=a*viewportWidth-b*viewportWidth,f=transitionForProgressInRange(d,.6,1);if(c.style.webkitTransform="translate3d("+e+"px, 0, 0) scale("+f+")",c.style.MozTransform="translate3d("+e+"px, 0, 0) scale("+f+")",a<captions.length){var g=transitionForProgressInRange(d,-8,1);captions[a].style.opacity=g}}c.style.opacity=d>0?1:0;var h=transitionForProgressInRange(clampedProgress(d),.2,1,0);tabs[a].style.opacity=h})}})},setupPanSupport=function(){var a=document.getElementById("slides");a.addEventListener("touchstart",function(a){var b=a.touches[0];startDragging(b.pageX)},!1),a.addEventListener("touchmove",function(a){a.preventDefault();var b=a.touches[0];continueDragging(b.pageX)},!1),a.addEventListener("touchend",function(a){endDragging()},!1),a.addEventListener("touchcancel",function(a){endDragging()},!1),a.addEventListener("mousedown",function(a){startDragging(a.clientX)},!1),a.addEventListener("mousemove",function(a){isDragging&&continueDragging(a.clientX)},!1),a.addEventListener("mouseup",function(a){endDragging()},!1),a.addEventListener("mouseleave",function(a){isDragging&&endDragging()},!1)},startDragging=function(a){lastX=a,isDragging=!0,viewportWidth=$("#wrapper").innerWidth(),mainSpring.setAtRest(),$("#slides").addClass("dragging")},continueDragging=function(a){panVelocity=a-lastX,lastX=a;var b=progressForValueInRange(panVelocity,0,-viewportWidth),c=mainSpring.getCurrentValue();(0>c+b||c+b>tabs.length-1)&&(b*=.5),mainSpring.setCurrentValue(c+b),mainSpring.setAtRest()},endDragging=function(){var a=mainSpring.getCurrentValue(),b=endValue,c=Math.abs(panVelocity)>3,d=Math.abs(a-b)>.3,e=d||c,f=0>=panVelocity;if(e){var g=f?b+1:b-1;selectTabIndex(g,!0)}else selectTabIndex(b,!0);var h=progressForValueInRange(panVelocity,0,-viewportWidth);mainSpring.setVelocity(30*h),panVelocity=0,isDragging=!1,$("#slides").removeClass("dragging")},layoutCaptions=function(){var a=rightEdgeInput,b=bottomEdgeInput,c=bottomPadding,d=$("#slides li");viewportWidth=d.innerWidth(),viewportHeight=d.innerHeight(),$(".caption").each(function(d,e){captions[d]=e;var f=calculateContentScaleForIndex(d),g=viewportWidth/2+a[d]*f,h=-1*(viewportHeight/2-b[d]*f),i=parseInt($(e).css("padding-left"),10);c[d]&&(h-=i),g=Math.round(g),h=Math.round(h),e.style.webkitTransform="translate3d("+g+"px, "+h+"px, 0)",e.style.MozTransform="translate3d("+g+"px, "+h+"px, 0)",captions[d].style.visibility="visible"})},setupTabPressedStates=function(){downSpring.setSpringConfig(rebound.SpringConfig.fromOrigamiTensionAndFriction(100,5.5)),downSpring.addListener({onSpringUpdate:function(a){var b=a.getCurrentValue(),c=transitionForProgressInRange(b,1,.92);tabs[downIndex].style.webkitTransform="scale("+c+")",tabs[downIndex].style.MozTransform="scale("+c+")"}})},pressDownOnTabIndex=function(a){downIndex=a,$("#nav li").each(function(b,c){b===a&&downSpring.setEndValue(1)})},releaseDownOnTabIndex=function(a){$("#nav li").each(function(b,c){b===a&&downSpring.setEndValue(0)})},selectTabIndex=function(a,b){0>a?a=0:a>tabs.length-1&&(a=tabs.length-1),b?(viewportWidth=$("#wrapper").innerWidth(),endValue=a,mainSpring.setEndValue(a)):mainSpring.setCurrentValue(a)},navOffsetForIndex=function(a){var b=0;return b=a>0?-1*(tabWidthRunningSum[a-1]+tabWidths[a]/2):tabWidths[a]/2*-1},calculateTabWidths=function(){var a=0;return $("#nav li").each(function(b,c){tabWidths[b]=$(c).innerWidth(),tabWidthRunningSum[b]=tabWidths[b],b>0&&(tabWidthRunningSum[b]=tabWidthRunningSum[b]+tabWidthRunningSum[b-1]),a+=tabWidths[b]}),a},calculateContentScaleForIndex=function(a){var b=imageWidths[a],c=imageHeights[a],d=viewportWidth/viewportHeight>b/c?viewportHeight/c:viewportWidth/b;return d},setupArrowKeys=function(){var a=!0,b=!1;$(document).keydown(function(c){var d=endValue,e=.001,f=.03,g=!1;37==c.keyCode?(g=mainSpring.getCurrentValue()<e,g&&a?(b=!0,mainSpring.setEndValue(mainSpring.getCurrentValue()-f)):g||(b=!1,selectTabIndex(d-1,!0))):39==c.keyCode&&(g=mainSpring.getCurrentValue()>tabs.length-1-e,g&&a?(b=!0,mainSpring.setEndValue(mainSpring.getCurrentValue()+f)):g||(b=!1,selectTabIndex(d+1,!0))),a=!1}),$(document).keyup(function(c){var d=endValue;37==c.keyCode&&b?selectTabIndex(d-1,!0):39==c.keyCode&&b&&selectTabIndex(d+1,!0),isRubberBanding=!1,a=!0})},progressForValueInRange=function(a,b,c){return(a-b)/(c-b)},transitionForProgressInRange=function(a,b,c){return b+a*(c-b)},clampedProgress=function(a){return 0>a?a=0:a>1&&(a=1),a},transitionForProgressInSteps=function(a,b){var c=-1;return b.length<2?c:(0>a?c=transitionForProgressInRange(a,b[0],b[1]):a>b.length-1?(normalizedProgress=progressForValueInRange(a,Math.floor(a),Math.floor(a)+1),normalizedProgress+=1,c=transitionForProgressInRange(normalizedProgress,b[b.length-2],b[b.length-1])):a==b.length-1||0===a?c=b[a]:(normalizedProgress=progressForValueInRange(a,Math.floor(a),Math.floor(a)+1),c=transitionForProgressInRange(normalizedProgress,b[Math.floor(a)],b[Math.floor(a)+1])),c)},function(a){FastClick.attach(document.body)}(jQuery),function(a){"use strict";var b=a("body"),c=a("#hamburgericon"),d=a("#appnav > .menu");a(".menu-button, .overlay").on("click",function(){b.hasClass("shift")?(b.removeClass("shift"),c.removeClass("open"),d.css("z-index","-1")):(b.addClass("shift"),c.addClass("open"),d.css("z-index","1"))})}(jQuery),function(a){"use strict";var b=a("#slides li img");b.attr("draggable","false"),b.attr("ondragstart","return false;")}(jQuery),function(a){"use strict";var b=a("html, body"),c=a("#appcontent").smoothState({prefetch:!0,development:!0,pageCacheSize:4,onStart:{duration:250,render:function(a,d){c.toggleAnimationClass("is-exiting"),b.animate({scrollTop:0})}},onProgress:{duration:0,render:function(a,c){b.css("cursor","wait"),b.find("a").css("cursor","wait")}},onEnd:{duration:0,render:function(a,c,d){b.css("cursor","auto"),b.find("a").css("cursor","auto"),c.html(d)}},callback:function(a,b,c){}}).data("smoothState")}(jQuery);